### Backend API Testing File
### Use with REST Client extension in VS Code or similar tool

@baseUrl = http://localhost:3000
@token = your-jwt-token-here

### 1. Test Server Connection
GET {{baseUrl}}/
Content-Type: application/json

### 2. Register New User
POST {{baseUrl}}/api/register
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "test123",
  "role": "operator",
  "full_name": "Test User"
}

### 3. Login
POST {{baseUrl}}/api/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "test123"
}

### 4. Get All Assets (Public)
GET {{baseUrl}}/api/assets
Content-Type: application/json

### 5. Get Single Asset
GET {{baseUrl}}/api/assets/1
Content-Type: application/json

### 6. Create Asset (Protected - requires token)
POST {{baseUrl}}/api/assets
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "asset_code": "ASSET001",
  "asset_name": "Test Machine",
  "asset_location": "Plant 1",
  "bu_name": "BU-ENG",
  "asset_type": "machine",
  "manufacturer": "Test Manufacturer",
  "model_number": "MOD-001",
  "model_name": "Model A",
  "install_date": "2024-01-01",
  "asset_status": "active"
}

### 7. Update Asset (Protected)
PUT {{baseUrl}}/api/assets/1
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "asset_name": "Updated Machine Name",
  "asset_status": "active"
}

### 8. Get All Breakdowns (Public)
GET {{baseUrl}}/api/breakdowns
Content-Type: application/json

### 9. Create Breakdown Entry (Protected)
POST {{baseUrl}}/api/breakdowns
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "bd_code": "BD-001",
  "shift_id": "A",
  "entry_date": "2024-01-15",
  "entry_time": "10:30:00",
  "asset_id": 1,
  "asset_location": "Plant 1",
  "bu_name": "BU-ENG",
  "operator_name": "John Doe",
  "key_issue": "Machine stopped",
  "nature_of_complaint": "Motor failure",
  "note": "Urgent repair needed"
}

### 10. Get All Spare Parts (Public)
GET {{baseUrl}}/api/spares
Content-Type: application/json

### 11. Create Spare Part (Protected)
POST {{baseUrl}}/api/spares
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "part_code": "SP-001",
  "part_name": "Test Spare Part",
  "part_no": "PN-001",
  "min_level": 5,
  "reorder_level": 10,
  "current_stock": 20,
  "unit_cost": 100.50,
  "supplier": "Test Supplier",
  "spare_location": "Warehouse A",
  "bu_name": "BU-ENG"
}

### 12. Create Spare Transaction (Protected)
POST {{baseUrl}}/api/spares/transaction
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "part_id": 1,
  "quantity": 2,
  "direction": "issue",
  "asset_id": 1,
  "pm_bd_id": 1,
  "pm_bd_type": "bd",
  "purpose": "Breakdown repair"
}

### 13. Get PM Schedules (Public)
GET {{baseUrl}}/api/pm
Content-Type: application/json

### 14. Create PM Schedule (Protected)
POST {{baseUrl}}/api/pm
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "asset_id": 1,
  "pm_title": "Monthly PM",
  "frequency_interval": "30 days",
  "next_pm_date": "2024-02-15",
  "checklist_ref": "CHK-001",
  "status": "scheduled"
}

### 15. Get Utility Logs (Public)
GET {{baseUrl}}/api/utilities
Content-Type: application/json

### 16. Create Utility Log (Protected)
POST {{baseUrl}}/api/utilities
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "utility_type": "Power",
  "meter_point": "METER-001",
  "reading_unit": "kWh",
  "reading_value": 1500.50,
  "timestamp": "2024-01-15T10:30:00Z",
  "asset_id": 1,
  "business_unit_id": 1,
  "location_id": 1,
  "remarks": "Normal reading"
}

### 17. Get Dashboard Stats (Public)
GET {{baseUrl}}/api/dashboard/stats
Content-Type: application/json

### 18. Get QR Code Asset
GET {{baseUrl}}/api/qr/QR-001
Content-Type: application/json

### 19. Get All Users (Protected - Admin only)
GET {{baseUrl}}/api/users
Content-Type: application/json
Authorization: Bearer {{token}}

